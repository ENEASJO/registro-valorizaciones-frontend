import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { motion, AnimatePresence } from 'framer-motion';
import { X, Building2, Users, Mail, Phone, MapPin, Calendar, Crown, User, FileText, Hash, Star, Award, Briefcase, Edit } from 'lucide-react';
const DetalleEntidad = ({ entidad, isOpen, onClose, onEditar }) => {
    if (!entidad || !isOpen)
        return null;
    const getEstadoColor = (estado) => {
        switch (estado) {
            case 'ACTIVO':
                return 'bg-green-100 text-green-800';
            case 'INACTIVO':
                return 'bg-gray-100 text-gray-800';
            case 'SUSPENDIDO':
                return 'bg-red-100 text-red-800';
            default:
                return 'bg-gray-100 text-gray-800';
        }
    };
    return (_jsx(AnimatePresence, { children: _jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4", children: _jsxs(motion.div, { initial: { opacity: 0, scale: 0.95, y: 20 }, animate: { opacity: 1, scale: 1, y: 0 }, exit: { opacity: 0, scale: 0.95, y: 20 }, className: "bg-white rounded-xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto", children: [_jsxs("div", { className: "sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-xl", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: `flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center ${entidad.tipo_entidad === 'EMPRESA'
                                            ? 'bg-blue-100 text-blue-600'
                                            : 'bg-purple-100 text-purple-600'}`, children: entidad.tipo_entidad === 'EMPRESA' ? (_jsx(Building2, { className: "w-6 h-6" })) : (_jsx(Users, { className: "w-6 h-6" })) }), _jsxs("div", { children: [_jsx("h2", { className: "text-xl font-bold text-gray-900", children: entidad.nombre_completo }), _jsxs("div", { className: "flex items-center gap-2 mt-1", children: [_jsx("span", { className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${entidad.tipo_entidad === 'EMPRESA' ? 'bg-blue-100 text-blue-800' : 'bg-purple-100 text-purple-800'}`, children: entidad.tipo_entidad === 'EMPRESA' ? 'Empresa Individual' : 'Consorcio' }), _jsx("span", { className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getEstadoColor(entidad.estado)}`, children: entidad.estado })] })] })] }), _jsxs("div", { className: "flex items-center gap-2", children: [onEditar && (_jsxs("button", { onClick: onEditar, className: "btn-secondary flex items-center gap-2", children: [_jsx(Edit, { className: "w-4 h-4" }), "Editar"] })), _jsx("button", { onClick: onClose, className: "p-2 hover:bg-gray-100 rounded-lg transition-colors", children: _jsx(X, { className: "w-5 h-5 text-gray-500" }) })] })] }), _jsx("div", { className: "px-6 py-6", children: entidad.tipo_entidad === 'EMPRESA' && entidad.datos_empresa ? (_jsx(DetalleEmpresa, { entidad: entidad })) : entidad.tipo_entidad === 'CONSORCIO' && entidad.datos_consorcio ? (_jsx(DetalleConsorcio, { entidad: entidad })) : (_jsxs("div", { className: "text-center py-8 text-gray-500", children: [_jsx(FileText, { className: "w-12 h-12 mx-auto mb-3 text-gray-300" }), _jsx("p", { children: "No se pudo cargar la informaci\u00F3n de la entidad" })] })) })] }) }) }));
};
// Componente para mostrar detalle de empresa
const DetalleEmpresa = ({ entidad }) => {
    const empresa = entidad.datos_empresa;
    return (_jsxs("div", { className: "space-y-8", children: [_jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-8", children: [_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-4", children: "Informaci\u00F3n General" }), _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "grid grid-cols-2 gap-4", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-500", children: "RUC" }), _jsxs("div", { className: "flex items-center gap-2 mt-1", children: [_jsx(Hash, { className: "w-4 h-4 text-gray-400" }), _jsx("span", { className: "text-gray-900 font-mono", children: empresa.ruc })] })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-500", children: "Categor\u00EDa" }), _jsxs("div", { className: "flex items-center gap-2 mt-1", children: [_jsx(Award, { className: "w-4 h-4 text-gray-400" }), _jsx("span", { className: "text-gray-900", children: empresa.categoria_contratista ? `Categoría ${empresa.categoria_contratista}` : 'No especificada' })] })] })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-500", children: "Raz\u00F3n Social" }), _jsx("p", { className: "mt-1 text-gray-900 font-medium", children: empresa.razon_social })] }), empresa.nombre_comercial && (_jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-500", children: "Nombre Comercial" }), _jsx("p", { className: "mt-1 text-gray-900", children: empresa.nombre_comercial })] })), _jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-500", children: "Fechas" }), _jsxs("div", { className: "mt-1 space-y-1", children: [_jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-600", children: [_jsx(Calendar, { className: "w-4 h-4" }), "Registrado: ", new Date(entidad.created_at).toLocaleDateString('es-PE')] }), _jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-600", children: [_jsx(Calendar, { className: "w-4 h-4" }), "Actualizado: ", new Date(entidad.updated_at).toLocaleDateString('es-PE')] })] })] })] })] }), _jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-4", children: "Representante Legal" }), _jsx("div", { className: "bg-gray-50 rounded-lg p-4", children: _jsxs("div", { className: "flex items-start gap-3", children: [_jsx("div", { className: "w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center", children: _jsx(User, { className: "w-5 h-5 text-primary-600" }) }), _jsxs("div", { className: "flex-1", children: [_jsx("p", { className: "font-medium text-gray-900", children: empresa.representante_legal || 'No especificado' }), empresa.dni_representante && (_jsxs("p", { className: "text-sm text-gray-600", children: ["DNI: ", empresa.dni_representante] }))] })] }) })] })] }), _jsxs("div", { className: "space-y-6", children: [_jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-4", children: "Contacto" }), _jsxs("div", { className: "space-y-3", children: [empresa.email && (_jsxs("div", { className: "flex items-center gap-3", children: [_jsx(Mail, { className: "w-5 h-5 text-gray-400" }), _jsx("div", { children: _jsx("a", { href: `mailto:${empresa.email}`, className: "text-primary-600 hover:text-primary-700", children: empresa.email }) })] })), empresa.telefono && (_jsxs("div", { className: "flex items-center gap-3", children: [_jsx(Phone, { className: "w-5 h-5 text-gray-400" }), _jsx("div", { children: _jsx("a", { href: `tel:${empresa.telefono}`, className: "text-primary-600 hover:text-primary-700", children: empresa.telefono }) })] })), empresa.direccion && (_jsxs("div", { className: "flex items-start gap-3", children: [_jsx(MapPin, { className: "w-5 h-5 text-gray-400 mt-0.5" }), _jsxs("div", { children: [_jsx("p", { className: "text-gray-900", children: empresa.direccion }), (empresa.distrito || empresa.provincia) && (_jsx("p", { className: "text-sm text-gray-600", children: [empresa.distrito, empresa.provincia].filter(Boolean).join(', ') }))] })] }))] })] }), empresa.especialidades && empresa.especialidades.length > 0 && (_jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-4", children: "Especialidades" }), _jsx("div", { className: "flex flex-wrap gap-2", children: empresa.especialidades.map((especialidad) => (_jsx("span", { className: "px-3 py-2 bg-primary-100 text-primary-800 text-sm rounded-lg font-medium", children: especialidad.replace('_', ' ') }, especialidad))) })] }))] })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6", children: [_jsx("div", { className: "bg-blue-50 rounded-lg p-6", children: _jsxs("div", { className: "flex items-center gap-3 mb-2", children: [_jsx(Briefcase, { className: "w-8 h-8 text-blue-600" }), _jsxs("div", { children: [_jsx("h4", { className: "font-semibold text-blue-900", children: "Tipo de Empresa" }), _jsx("p", { className: "text-blue-700 text-sm", children: empresa.tipo_empresa || 'No especificado' })] })] }) }), _jsx("div", { className: "bg-green-50 rounded-lg p-6", children: _jsxs("div", { className: "flex items-center gap-3 mb-2", children: [_jsx(Star, { className: "w-8 h-8 text-green-600" }), _jsxs("div", { children: [_jsx("h4", { className: "font-semibold text-green-900", children: "Estado" }), _jsx("p", { className: "text-green-700 text-sm", children: entidad.estado })] })] }) }), _jsx("div", { className: "bg-purple-50 rounded-lg p-6", children: _jsxs("div", { className: "flex items-center gap-3 mb-2", children: [_jsx(Award, { className: "w-8 h-8 text-purple-600" }), _jsxs("div", { children: [_jsx("h4", { className: "font-semibold text-purple-900", children: "Categor\u00EDa" }), _jsx("p", { className: "text-purple-700 text-sm", children: empresa.categoria_contratista ? `Categoría ${empresa.categoria_contratista}` : 'No especificada' })] })] }) })] })] }));
};
// Componente para mostrar detalle de consorcio
const DetalleConsorcio = ({ entidad }) => {
    const consorcio = entidad.datos_consorcio;
    const empresasParticipantes = entidad.empresas_participantes || [];
    return (_jsxs("div", { className: "space-y-8", children: [_jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-8", children: [_jsx("div", { className: "space-y-6", children: _jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-4", children: "Informaci\u00F3n General" }), _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-500", children: "Nombre del Consorcio" }), _jsx("p", { className: "mt-1 text-gray-900 font-medium", children: consorcio.nombre })] }), consorcio.descripcion && (_jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-500", children: "Descripci\u00F3n" }), _jsx("p", { className: "mt-1 text-gray-700", children: consorcio.descripcion })] })), _jsxs("div", { className: "grid grid-cols-2 gap-4", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-500", children: "Fecha de Constituci\u00F3n" }), _jsxs("div", { className: "flex items-center gap-2 mt-1", children: [_jsx(Calendar, { className: "w-4 h-4 text-gray-400" }), _jsx("span", { className: "text-gray-900", children: new Date(consorcio.fecha_constitucion).toLocaleDateString('es-PE') })] })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-500", children: "Total de Empresas" }), _jsx("span", { className: "text-2xl font-bold text-primary-600", children: empresasParticipantes.length })] })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-500", children: "Fechas de Sistema" }), _jsxs("div", { className: "mt-1 space-y-1", children: [_jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-600", children: [_jsx(Calendar, { className: "w-4 h-4" }), "Registrado: ", new Date(entidad.created_at).toLocaleDateString('es-PE')] }), _jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-600", children: [_jsx(Calendar, { className: "w-4 h-4" }), "Actualizado: ", new Date(entidad.updated_at).toLocaleDateString('es-PE')] })] })] })] })] }) }), _jsxs("div", { className: "space-y-6", children: [_jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-4", children: "Empresa L\u00EDder" }), _jsx("div", { className: "bg-yellow-50 border border-yellow-200 rounded-lg p-4", children: _jsxs("div", { className: "flex items-start gap-3", children: [_jsx("div", { className: "w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center", children: _jsx(Crown, { className: "w-5 h-5 text-yellow-600" }) }), _jsxs("div", { className: "flex-1", children: [_jsx("p", { className: "font-medium text-gray-900", children: consorcio.empresa_lider_nombre }), _jsx("p", { className: "text-sm text-gray-600 mt-1", children: "Empresa que lidera y representa al consorcio" })] })] }) })] }), consorcio.especialidades && consorcio.especialidades.length > 0 && (_jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-4", children: "Especialidades del Consorcio" }), _jsx("div", { className: "flex flex-wrap gap-2", children: consorcio.especialidades.map((especialidad) => (_jsx("span", { className: "px-3 py-2 bg-primary-100 text-primary-800 text-sm rounded-lg font-medium", children: especialidad.replace('_', ' ') }, especialidad))) })] }))] })] }), _jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-6", children: "Empresas Participantes" }), empresasParticipantes.length === 0 ? (_jsxs("div", { className: "bg-gray-50 rounded-lg p-8 text-center", children: [_jsx(Users, { className: "w-12 h-12 mx-auto mb-3 text-gray-300" }), _jsx("p", { className: "text-gray-500", children: "No hay empresas participantes registradas" })] })) : (_jsxs("div", { className: "space-y-4", children: [empresasParticipantes.map((ep) => (_jsx("div", { className: `border rounded-lg p-6 ${ep.es_lider
                                    ? 'border-yellow-200 bg-yellow-50'
                                    : 'border-gray-200 bg-white'}`, children: _jsxs("div", { className: "flex items-start justify-between", children: [_jsxs("div", { className: "flex items-start gap-4 flex-1", children: [_jsx("div", { className: `w-12 h-12 rounded-lg flex items-center justify-center ${ep.es_lider
                                                        ? 'bg-yellow-100 text-yellow-600'
                                                        : 'bg-blue-100 text-blue-600'}`, children: ep.es_lider ? _jsx(Crown, { className: "w-6 h-6" }) : _jsx(Building2, { className: "w-6 h-6" }) }), _jsxs("div", { className: "flex-1", children: [_jsxs("div", { className: "flex items-center gap-2 mb-2", children: [_jsx("h4", { className: "font-semibold text-gray-900", children: ep.empresa_nombre }), ep.es_lider && (_jsxs("span", { className: "inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full", children: [_jsx(Crown, { className: "w-3 h-3" }), "L\u00EDder"] }))] }), _jsxs("p", { className: "text-sm text-gray-600 mb-3", children: ["RUC: ", ep.empresa_ruc] }), ep.responsabilidades && ep.responsabilidades.length > 0 && (_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-gray-700 mb-2", children: "Responsabilidades:" }), _jsx("div", { className: "flex flex-wrap gap-1", children: ep.responsabilidades.map((resp) => (_jsx("span", { className: "px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded", children: resp.replace('_', ' ') }, resp))) })] }))] })] }), _jsxs("div", { className: "text-right", children: [_jsxs("div", { className: "text-2xl font-bold text-primary-600", children: [ep.porcentaje_participacion, "%"] }), _jsx("p", { className: "text-sm text-gray-500", children: "Participaci\u00F3n" })] })] }) }, ep.empresa_id))), _jsx("div", { className: "bg-gray-50 rounded-lg p-4", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsx("span", { className: "font-medium text-gray-700", children: "Total de participaci\u00F3n:" }), _jsxs("span", { className: "text-lg font-bold text-primary-600", children: [empresasParticipantes.reduce((sum, ep) => sum + ep.porcentaje_participacion, 0).toFixed(2), "%"] })] }) })] }))] })] }));
};
export default DetalleEntidad;
