import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { motion } from 'framer-motion';
import { Line, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell, ComposedChart, RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar, Treemap, ScatterChart, Scatter, ReferenceLine } from 'recharts';
import { Target, DollarSign, Building, MapPin, Star, Award, Shield, Activity, Gauge, ArrowUp, ArrowDown, Minus, Eye, Lightbulb, Settings } from 'lucide-react';
const ReporteGerencial = ({ datos, filtros }) => {
    // Configuración de colores para gráficos
    const colores = {
        primary: '#3B82F6',
        success: '#10B981',
        warning: '#F59E0B',
        danger: '#EF4444',
        info: '#06B6D4',
        purple: '#8B5CF6',
        indigo: '#6366F1',
        emerald: '#059669',
        rose: '#F43F5E',
        slate: '#64748B'
    };
    // Datos para el radar de desempeño
    const datosRadarDesempeño = [
        { indicador: 'Cumplimiento', valor: datos.kpisPrincipales.indiceCumplimiento, max: 100 },
        { indicador: 'Eficiencia', valor: datos.kpisPrincipales.eficienciaPresupuestal, max: 100 },
        { indicador: 'Avance', valor: datos.kpisPrincipales.avanceGeneral, max: 100 },
        { indicador: 'Satisfacción', valor: datos.kpisPrincipales.satisfaccionSupervision * 20, max: 100 },
        { indicador: 'Calidad', valor: 88.5, max: 100 }, // Valor simulado
        { indicador: 'Seguridad', valor: 92.3, max: 100 } // Valor simulado
    ];
    // Datos para tendencias por región con métricas adicionales
    const datosTendenciasRegion = datos.tendenciasPorRegion.map(region => ({
        ...region,
        eficiencia: (region.avancePromedio / (region.inversion / 1000000)) * 100,
        score: region.avancePromedio * 0.4 + (region.problemas === 0 ? 30 : 30 - region.problemas * 5) +
            (region.obrasActivas * 2)
    }));
    // Datos para matriz de riesgos
    const datosMatrizRiesgos = datos.analisisRiesgos.map(riesgo => ({
        name: riesgo.categoria,
        probabilidad: riesgo.probabilidad * 100,
        impacto: riesgo.impacto * 100,
        nivel: riesgo.nivel,
        size: Math.max(riesgo.probabilidad * riesgo.impacto * 100, 20)
    }));
    // Datos para distribución de estados de obra
    const datosEstadosObra = Object.entries(datos.estadoObras).map(([estado, cantidad]) => ({
        name: estado.replace('_', ' '),
        value: cantidad,
        color: estado === 'EN_EJECUCION' ? colores.success :
            estado === 'TERMINADA' ? colores.primary :
                estado === 'PARALIZADA' ? colores.danger :
                    estado === 'CANCELADA' ? colores.slate :
                        colores.warning
    }));
    // Función para formatear números como moneda
    const formatearMoneda = (valor) => new Intl.NumberFormat('es-PE', { style: 'currency', currency: 'PEN', minimumFractionDigits: 0 }).format(valor);
    // Función para formatear números como porcentaje
    const formatearPorcentaje = (valor) => `${valor.toFixed(1)}%`;
    // Función para formatear números con separadores de miles
    const formatearNumero = (valor) => new Intl.NumberFormat('es-PE', { minimumFractionDigits: 0 }).format(valor);
    // Función para determinar el ícono de tendencia
    const obtenerIconoTendencia = (tendencia) => {
        switch (tendencia) {
            case 'MEJORANDO': return _jsx(ArrowUp, { className: "w-4 h-4 text-green-600" });
            case 'EMPEORANDO': return _jsx(ArrowDown, { className: "w-4 h-4 text-red-600" });
            default: return _jsx(Minus, { className: "w-4 h-4 text-gray-600" });
        }
    };
    // Función para obtener el color de calificación de desempeño
    const obtenerColorDesempeño = (calificacion) => {
        switch (calificacion) {
            case 'EXCELENTE': return 'bg-green-100 text-green-800 border-green-200';
            case 'BUENO': return 'bg-blue-100 text-blue-800 border-blue-200';
            case 'REGULAR': return 'bg-amber-100 text-amber-800 border-amber-200';
            case 'DEFICIENTE': return 'bg-red-100 text-red-800 border-red-200';
            default: return 'bg-gray-100 text-gray-800 border-gray-200';
        }
    };
    // Custom tooltip para gráficos de moneda
    const TooltipMoneda = ({ active, payload, label }) => {
        if (active && payload && payload.length) {
            return (_jsxs("div", { className: "bg-white p-3 border border-gray-300 rounded-lg shadow-lg", children: [_jsx("p", { className: "font-medium text-gray-900", children: label }), payload.map((entry, index) => (_jsx("p", { style: { color: entry.color }, children: `${entry.name}: ${typeof entry.value === 'number' && entry.value > 1000 ?
                            formatearMoneda(entry.value) :
                            formatearNumero(entry.value)}` }, index)))] }));
        }
        return null;
    };
    return (_jsxs("div", { className: "space-y-8", children: [_jsx(motion.div, { initial: { opacity: 0, y: -20 }, animate: { opacity: 1, y: 0 }, className: "bg-gradient-to-r from-indigo-600 to-purple-700 text-white p-6 rounded-xl", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h2", { className: "text-2xl font-bold", children: "Dashboard Gerencial Ejecutivo" }), _jsxs("p", { className: "text-indigo-100 mt-1", children: ["An\u00E1lisis estrat\u00E9gico del portafolio de inversiones - ", filtros.fechaInicio, " al ", filtros.fechaFin] }), _jsxs("p", { className: "text-indigo-200 text-sm mt-1", children: ["Inversi\u00F3n Total: ", formatearMoneda(datos.kpisPrincipales.inversionTotal), " \u2022", datos.kpisPrincipales.obrasEnEjecucion, " obras activas"] })] }), _jsxs("div", { className: "text-right", children: [_jsx("div", { className: "text-3xl font-bold", children: formatearPorcentaje(datos.kpisPrincipales.avanceGeneral) }), _jsx("div", { className: "text-sm text-indigo-100", children: "Avance General" })] })] }) }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.1 }, className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6", children: [_jsx("div", { className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Inversi\u00F3n Total" }), _jsx("p", { className: "text-xl font-bold text-indigo-600", children: formatearMoneda(datos.kpisPrincipales.inversionTotal) })] }), _jsx("div", { className: "p-3 bg-indigo-100 rounded-lg", children: _jsx(DollarSign, { className: "w-6 h-6 text-indigo-600" }) })] }) }), _jsx("div", { className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Avance General" }), _jsx("p", { className: "text-xl font-bold text-green-600", children: formatearPorcentaje(datos.kpisPrincipales.avanceGeneral) })] }), _jsx("div", { className: "p-3 bg-green-100 rounded-lg", children: _jsx(Activity, { className: "w-6 h-6 text-green-600" }) })] }) }), _jsx("div", { className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Obras Activas" }), _jsx("p", { className: "text-xl font-bold text-purple-600", children: datos.kpisPrincipales.obrasEnEjecucion })] }), _jsx("div", { className: "p-3 bg-purple-100 rounded-lg", children: _jsx(Building, { className: "w-6 h-6 text-purple-600" }) })] }) }), _jsx("div", { className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Eficiencia Presup." }), _jsx("p", { className: "text-xl font-bold text-blue-600", children: formatearPorcentaje(datos.kpisPrincipales.eficienciaPresupuestal) })] }), _jsx("div", { className: "p-3 bg-blue-100 rounded-lg", children: _jsx(Target, { className: "w-6 h-6 text-blue-600" }) })] }) }), _jsx("div", { className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Cumplimiento" }), _jsx("p", { className: "text-xl font-bold text-emerald-600", children: formatearPorcentaje(datos.kpisPrincipales.indiceCumplimiento) })] }), _jsx("div", { className: "p-3 bg-emerald-100 rounded-lg", children: _jsx(Gauge, { className: "w-6 h-6 text-emerald-600" }) })] }) }), _jsx("div", { className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Satisfacci\u00F3n" }), _jsxs("p", { className: "text-xl font-bold text-amber-600", children: [datos.kpisPrincipales.satisfaccionSupervision.toFixed(1), "/5.0"] })] }), _jsx("div", { className: "p-3 bg-amber-100 rounded-lg", children: _jsx(Star, { className: "w-6 h-6 text-amber-600" }) })] }) })] }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [_jsxs(motion.div, { initial: { opacity: 0, x: -20 }, animate: { opacity: 1, x: 0 }, transition: { delay: 0.2 }, className: "lg:col-span-2 bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-2", children: "Distribuci\u00F3n de Inversi\u00F3n por Sector" }), _jsx("p", { className: "text-sm text-gray-600", children: "Composici\u00F3n del portafolio de inversiones por tipo de obra" })] }), _jsx("div", { className: "h-80", children: _jsx(ResponsiveContainer, { width: "100%", height: "100%", children: _jsx(Treemap, { data: datos.distribucionInversion, dataKey: "monto", aspectRatio: 4 / 3, stroke: "#fff", fill: "#8884d8", children: datos.distribucionInversion.map((entry, index) => (_jsx(Cell, { fill: entry.color }, `cell-${index}`))) }) }) }), _jsx("div", { className: "mt-4 grid grid-cols-2 md:grid-cols-3 gap-4", children: datos.distribucionInversion.map((item, index) => (_jsxs("div", { className: "flex items-center gap-2", children: [_jsx("div", { className: "w-3 h-3 rounded-full", style: { backgroundColor: item.color } }), _jsxs("div", { className: "text-sm", children: [_jsx("div", { className: "font-medium text-gray-900", children: item.categoria }), _jsx("div", { className: "text-gray-600", children: formatearPorcentaje(item.porcentaje) })] })] }, index))) })] }), _jsxs(motion.div, { initial: { opacity: 0, x: 20 }, animate: { opacity: 1, x: 0 }, transition: { delay: 0.3 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-2", children: "Estado de Obras" }), _jsx("p", { className: "text-sm text-gray-600", children: "Distribuci\u00F3n por estado de ejecuci\u00F3n" })] }), _jsx("div", { className: "h-64", children: _jsx(ResponsiveContainer, { width: "100%", height: "100%", children: _jsxs(PieChart, { children: [_jsx(Pie, { data: datosEstadosObra, cx: "50%", cy: "50%", labelLine: false, label: ({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`, outerRadius: 80, fill: "#8884d8", dataKey: "value", children: datosEstadosObra.map((entry, index) => (_jsx(Cell, { fill: entry.color }, `cell-${index}`))) }), _jsx(Tooltip, {})] }) }) }), _jsx("div", { className: "space-y-2 text-sm", children: datosEstadosObra.map((item, index) => (_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center", children: [_jsx("div", { className: "w-3 h-3 rounded-full mr-2", style: { backgroundColor: item.color } }), _jsx("span", { className: "text-gray-600", children: item.name })] }), _jsx("span", { className: "font-medium text-gray-900", children: item.value })] }, index))) })] })] }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [_jsxs(motion.div, { initial: { opacity: 0, x: -20 }, animate: { opacity: 1, x: 0 }, transition: { delay: 0.4 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("h3", { className: "text-lg font-semibold text-gray-900 mb-2 flex items-center", children: [_jsx(Gauge, { className: "w-5 h-5 text-blue-600 mr-2" }), "Radar de Desempe\u00F1o Integral"] }), _jsx("p", { className: "text-sm text-gray-600", children: "Evaluaci\u00F3n multidimensional del desempe\u00F1o organizacional" })] }), _jsx("div", { className: "h-80", children: _jsx(ResponsiveContainer, { width: "100%", height: "100%", children: _jsxs(RadarChart, { data: datosRadarDesempeño, children: [_jsx(PolarGrid, { stroke: "#e5e7eb" }), _jsx(PolarAngleAxis, { dataKey: "indicador", tick: { fontSize: 12 } }), _jsx(PolarRadiusAxis, { angle: 90, domain: [0, 100], tick: { fontSize: 10 }, tickFormatter: formatearPorcentaje }), _jsx(Radar, { name: "Desempe\u00F1o", dataKey: "valor", stroke: colores.primary, fill: colores.primary, fillOpacity: 0.3, strokeWidth: 2 })] }) }) }), _jsx("div", { className: "mt-4 text-center", children: _jsxs("p", { className: "text-sm text-gray-600", children: ["Score Promedio: ", _jsx("span", { className: "font-bold text-blue-600", children: formatearPorcentaje(datosRadarDesempeño.reduce((sum, item) => sum + item.valor, 0) / datosRadarDesempeño.length) })] }) })] }), _jsxs(motion.div, { initial: { opacity: 0, x: 20 }, animate: { opacity: 1, x: 0 }, transition: { delay: 0.5 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("h3", { className: "text-lg font-semibold text-gray-900 mb-2 flex items-center", children: [_jsx(Shield, { className: "w-5 h-5 text-red-600 mr-2" }), "Matriz de An\u00E1lisis de Riesgos"] }), _jsx("p", { className: "text-sm text-gray-600", children: "Evaluaci\u00F3n de probabilidad vs impacto de riesgos identificados" })] }), _jsx("div", { className: "h-80", children: _jsx(ResponsiveContainer, { width: "100%", height: "100%", children: _jsxs(ScatterChart, { children: [_jsx(CartesianGrid, { strokeDasharray: "3 3", stroke: "#f0f0f0" }), _jsx(XAxis, { type: "number", dataKey: "probabilidad", name: "Probabilidad", domain: [0, 100], tickFormatter: (value) => `${value}%` }), _jsx(YAxis, { type: "number", dataKey: "impacto", name: "Impacto", domain: [0, 100], tickFormatter: (value) => `${value}%` }), _jsx(Tooltip, { cursor: { strokeDasharray: '3 3' }, formatter: (value, name) => [`${value}%`, name], labelFormatter: (label) => `Riesgo: ${label}` }), _jsx(Scatter, { data: datosMatrizRiesgos, fill: colores.danger, fillOpacity: 0.7 }), _jsx(ReferenceLine, { x: 50, stroke: "#fbbf24", strokeDasharray: "2 2" }), _jsx(ReferenceLine, { y: 50, stroke: "#fbbf24", strokeDasharray: "2 2" })] }) }) }), _jsxs("div", { className: "mt-4 grid grid-cols-2 gap-4 text-xs", children: [_jsxs("div", { children: [_jsx("p", { className: "font-medium text-gray-700 mb-2", children: "Leyenda de Cuadrantes:" }), _jsxs("div", { className: "space-y-1", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx("div", { className: "w-3 h-3 bg-red-500 rounded-full" }), _jsx("span", { className: "text-gray-600", children: "Alto Riesgo" })] }), _jsxs("div", { className: "flex items-center gap-2", children: [_jsx("div", { className: "w-3 h-3 bg-amber-500 rounded-full" }), _jsx("span", { className: "text-gray-600", children: "Riesgo Medio" })] }), _jsxs("div", { className: "flex items-center gap-2", children: [_jsx("div", { className: "w-3 h-3 bg-green-500 rounded-full" }), _jsx("span", { className: "text-gray-600", children: "Bajo Riesgo" })] })] })] }), _jsxs("div", { children: [_jsx("p", { className: "font-medium text-gray-700 mb-2", children: "Riesgos Cr\u00EDticos:" }), _jsx("div", { className: "space-y-1", children: datosMatrizRiesgos
                                                    .filter(r => r.probabilidad > 50 && r.impacto > 50)
                                                    .map((riesgo, index) => (_jsx("div", { className: "text-red-600 font-medium", children: riesgo.name }, index))) })] })] })] })] }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.6 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("h3", { className: "text-lg font-semibold text-gray-900 mb-2 flex items-center", children: [_jsx(Award, { className: "w-5 h-5 text-gold-600 mr-2" }), "Ranking de Desempe\u00F1o de Contratistas"] }), _jsx("p", { className: "text-sm text-gray-600", children: "Evaluaci\u00F3n comparativa del desempe\u00F1o de proveedores" })] }), _jsx("div", { className: "overflow-x-auto", children: _jsxs("table", { className: "w-full text-sm", children: [_jsx("thead", { children: _jsxs("tr", { className: "border-b border-gray-200", children: [_jsx("th", { className: "text-left py-3 px-4 font-medium text-gray-900", children: "#" }), _jsx("th", { className: "text-left py-3 px-4 font-medium text-gray-900", children: "Contratista" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "Obras" }), _jsx("th", { className: "text-right py-3 px-4 font-medium text-gray-900", children: "Monto Total" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "Avance Prom." }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "Cumplimiento" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "Penalidades" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "Calificaci\u00F3n" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "Tendencia" })] }) }), _jsx("tbody", { children: datos.rankingContratistas.map((contratista, index) => (_jsxs("tr", { className: "border-b border-gray-100 hover:bg-gray-50", children: [_jsx("td", { className: "py-3 px-4", children: _jsx("div", { className: "flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white font-bold", children: index + 1 }) }), _jsxs("td", { className: "py-3 px-4", children: [_jsx("div", { className: "font-medium text-gray-900", children: contratista.nombre }), _jsxs("div", { className: "text-xs text-gray-500", children: ["ID: ", contratista.id] })] }), _jsx("td", { className: "py-3 px-4 text-center font-medium text-blue-600", children: contratista.obrasEnEjecucion }), _jsx("td", { className: "py-3 px-4 text-right font-medium text-gray-900", children: formatearMoneda(contratista.montoTotal) }), _jsx("td", { className: "py-3 px-4 text-center", children: _jsxs("div", { className: "flex items-center justify-center", children: [_jsx("div", { className: "w-16 bg-gray-200 rounded-full h-2", children: _jsx("div", { className: "bg-green-600 h-2 rounded-full", style: { width: `${Math.min(100, contratista.promedioAvance)}%` } }) }), _jsx("span", { className: "ml-2 text-sm font-medium", children: formatearPorcentaje(contratista.promedioAvance) })] }) }), _jsx("td", { className: "py-3 px-4 text-center", children: _jsx("span", { className: `font-medium ${contratista.indiceCumplimiento >= 90 ? 'text-green-600' :
                                                        contratista.indiceCumplimiento >= 75 ? 'text-amber-600' :
                                                            'text-red-600'}`, children: formatearPorcentaje(contratista.indiceCumplimiento) }) }), _jsx("td", { className: "py-3 px-4 text-center", children: _jsx("span", { className: `font-medium ${contratista.penalidades === 0 ? 'text-green-600' :
                                                        contratista.penalidades <= 2 ? 'text-amber-600' :
                                                            'text-red-600'}`, children: contratista.penalidades }) }), _jsx("td", { className: "py-3 px-4 text-center", children: _jsx("span", { className: `px-2 py-1 text-xs font-medium rounded-full border ${obtenerColorDesempeño(contratista.calificacionDesempeño)}`, children: contratista.calificacionDesempeño }) }), _jsx("td", { className: "py-3 px-4 text-center", children: _jsxs("div", { className: "flex items-center justify-center", children: [obtenerIconoTendencia(contratista.tendencia), _jsx("span", { className: "ml-1 text-xs text-gray-600", children: contratista.tendencia })] }) })] }, index))) })] }) })] }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.7 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("h3", { className: "text-lg font-semibold text-gray-900 mb-2 flex items-center", children: [_jsx(MapPin, { className: "w-5 h-5 text-purple-600 mr-2" }), "An\u00E1lisis de Tendencias por Regi\u00F3n"] }), _jsx("p", { className: "text-sm text-gray-600", children: "Comparativo de desempe\u00F1o e inversi\u00F3n por zona geogr\u00E1fica" })] }), _jsx("div", { className: "h-80 mb-6", children: _jsx(ResponsiveContainer, { width: "100%", height: "100%", children: _jsxs(ComposedChart, { data: datosTendenciasRegion, children: [_jsx(CartesianGrid, { strokeDasharray: "3 3", stroke: "#f0f0f0" }), _jsx(XAxis, { dataKey: "region", stroke: "#666", fontSize: 12 }), _jsx(YAxis, { yAxisId: "left", stroke: "#666", fontSize: 12, tickFormatter: (value) => formatearNumero(value) }), _jsx(YAxis, { yAxisId: "right", orientation: "right", stroke: "#666", fontSize: 12, tickFormatter: (value) => `${value}%` }), _jsx(Tooltip, { content: _jsx(TooltipMoneda, {}) }), _jsx(Legend, {}), _jsx(Bar, { yAxisId: "left", dataKey: "inversion", fill: colores.primary, name: "Inversi\u00F3n (S/)", radius: [2, 2, 0, 0] }), _jsx(Bar, { yAxisId: "left", dataKey: "obrasActivas", fill: colores.success, name: "Obras Activas", radius: [2, 2, 0, 0] }), _jsx(Line, { yAxisId: "right", type: "monotone", dataKey: "avancePromedio", stroke: colores.warning, strokeWidth: 3, dot: { fill: colores.warning, strokeWidth: 2, r: 6 }, name: "Avance Promedio (%)" }), _jsx(Line, { yAxisId: "right", type: "monotone", dataKey: "score", stroke: colores.purple, strokeWidth: 2, strokeDasharray: "5 5", dot: { fill: colores.purple, strokeWidth: 2, r: 4 }, name: "Score de Eficiencia" })] }) }) }), _jsx("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: datosTendenciasRegion.map((region, index) => (_jsxs("div", { className: "bg-gray-50 p-4 rounded-lg", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("h4", { className: "font-medium text-gray-900", children: region.region }), _jsx("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${region.problemas === 0 ? 'bg-green-100 text-green-800' :
                                                region.problemas <= 2 ? 'bg-amber-100 text-amber-800' :
                                                    'bg-red-100 text-red-800'}`, children: region.problemas === 0 ? 'Sin problemas' : `${region.problemas} problemas` })] }), _jsxs("div", { className: "grid grid-cols-2 gap-2 text-sm", children: [_jsxs("div", { children: [_jsx("span", { className: "text-gray-600", children: "Obras:" }), _jsx("span", { className: "font-medium text-gray-900 ml-1", children: region.obrasActivas })] }), _jsxs("div", { children: [_jsx("span", { className: "text-gray-600", children: "Avance:" }), _jsx("span", { className: "font-medium text-gray-900 ml-1", children: formatearPorcentaje(region.avancePromedio) })] }), _jsxs("div", { className: "col-span-2", children: [_jsx("span", { className: "text-gray-600", children: "Inversi\u00F3n:" }), _jsx("span", { className: "font-medium text-gray-900 ml-1", children: formatearMoneda(region.inversion) })] })] })] }, index))) })] }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.8 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("h3", { className: "text-lg font-semibold text-gray-900 mb-2 flex items-center", children: [_jsx(Eye, { className: "w-5 h-5 text-indigo-600 mr-2" }), "Proyecciones y Recomendaciones Estrat\u00E9gicas"] }), _jsx("p", { className: "text-sm text-gray-600", children: "An\u00E1lisis prospectivo y plan de acci\u00F3n para el cumplimiento de objetivos" })] }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [_jsxs("div", { className: "bg-gradient-to-br from-blue-50 to-indigo-100 p-4 rounded-lg", children: [_jsxs("h4", { className: "font-medium text-indigo-900 mb-3 flex items-center", children: [_jsx(Target, { className: "w-4 h-4 mr-2" }), "Proyecciones de Cumplimiento"] }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsx("span", { className: "text-indigo-700 text-sm", children: "Meta Anual:" }), _jsx("span", { className: "font-bold text-indigo-900", children: formatearPorcentaje(datos.proyeccionesEstrategicas.metaAnual) })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsx("span", { className: "text-indigo-700 text-sm", children: "Proyecci\u00F3n Alcance:" }), _jsx("span", { className: "font-bold text-indigo-900", children: formatearPorcentaje(datos.proyeccionesEstrategicas.proyeccionAlcance) })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsx("span", { className: "text-indigo-700 text-sm", children: "Brecha:" }), _jsxs("span", { className: `font-bold ${datos.proyeccionesEstrategicas.brechaEsperada >= 0 ? 'text-green-600' : 'text-red-600'}`, children: [datos.proyeccionesEstrategicas.brechaEsperada >= 0 ? '+' : '', formatearPorcentaje(datos.proyeccionesEstrategicas.brechaEsperada)] })] }), _jsxs("div", { className: "mt-4", children: [_jsx("div", { className: "w-full bg-gray-200 rounded-full h-3", children: _jsx("div", { className: "bg-gradient-to-r from-indigo-500 to-purple-600 h-3 rounded-full relative", style: { width: `${Math.min(100, datos.proyeccionesEstrategicas.proyeccionAlcance)}%` }, children: _jsx("div", { className: "absolute right-0 top-0 h-full w-1 bg-amber-500 rounded-r-full" }) }) }), _jsx("p", { className: "text-xs text-indigo-600 mt-1", children: "Avance proyectado al cierre del a\u00F1o" })] })] })] }), _jsxs("div", { className: "bg-gradient-to-br from-amber-50 to-orange-100 p-4 rounded-lg", children: [_jsxs("h4", { className: "font-medium text-amber-900 mb-3 flex items-center", children: [_jsx(Settings, { className: "w-4 h-4 mr-2" }), "Acciones Correctivas"] }), _jsx("div", { className: "space-y-2", children: datos.proyeccionesEstrategicas.accionesCorrectivas.map((accion, index) => (_jsxs("div", { className: "flex items-start gap-2", children: [_jsx("div", { className: "w-2 h-2 bg-amber-500 rounded-full mt-2 flex-shrink-0" }), _jsx("p", { className: "text-sm text-amber-800", children: accion })] }, index))) })] }), _jsxs("div", { className: "bg-gradient-to-br from-green-50 to-emerald-100 p-4 rounded-lg", children: [_jsxs("h4", { className: "font-medium text-green-900 mb-3 flex items-center", children: [_jsx(Lightbulb, { className: "w-4 h-4 mr-2" }), "Oportunidades de Mejora"] }), _jsx("div", { className: "space-y-2", children: datos.proyeccionesEstrategicas.oportunidadesMejora.map((oportunidad, index) => (_jsxs("div", { className: "flex items-start gap-2", children: [_jsx("div", { className: "w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0" }), _jsx("p", { className: "text-sm text-green-800", children: oportunidad })] }, index))) })] })] })] }), _jsx(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.9 }, className: "bg-gradient-to-r from-gray-800 to-gray-900 text-white p-6 rounded-xl", children: _jsxs("div", { className: "text-center", children: [_jsx("h3", { className: "text-xl font-bold mb-2", children: "Resumen Ejecutivo" }), _jsx("p", { className: "text-gray-300 mb-4", children: "Estado general del portafolio de inversiones y recomendaciones estrat\u00E9gicas" }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6", children: [_jsxs("div", { className: "text-center", children: [_jsx("div", { className: "text-3xl font-bold text-green-400", children: formatearPorcentaje(datos.kpisPrincipales.avanceGeneral) }), _jsx("div", { className: "text-sm text-gray-300", children: "Avance General" }), _jsx("div", { className: "text-xs text-green-300 mt-1", children: datos.kpisPrincipales.avanceGeneral >= datos.proyeccionesEstrategicas.metaAnual ?
                                                'Por encima de meta' : 'En progreso hacia meta' })] }), _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "text-3xl font-bold text-blue-400", children: formatearPorcentaje(datos.kpisPrincipales.eficienciaPresupuestal) }), _jsx("div", { className: "text-sm text-gray-300", children: "Eficiencia Presupuestal" }), _jsx("div", { className: "text-xs text-blue-300 mt-1", children: datos.kpisPrincipales.eficienciaPresupuestal >= 95 ?
                                                'Excelente control' : 'Dentro de parámetros' })] }), _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "text-3xl font-bold text-purple-400", children: datos.analisisRiesgos.filter(r => r.nivel === 'CRITICO').length }), _jsx("div", { className: "text-sm text-gray-300", children: "Riesgos Cr\u00EDticos" }), _jsx("div", { className: "text-xs text-purple-300 mt-1", children: datos.analisisRiesgos.filter(r => r.nivel === 'CRITICO').length === 0 ?
                                                'Sin riesgos críticos' : 'Requieren atención' })] })] }), _jsx("div", { className: "mt-6 p-4 bg-gray-700 rounded-lg", children: _jsxs("p", { className: "text-sm text-gray-200", children: [_jsx("span", { className: "font-medium", children: "Recomendaci\u00F3n Principal:" }), datos.proyeccionesEstrategicas.brechaEsperada < 0 ?
                                        ' Se requiere acelerar la ejecución de obras críticas para alcanzar la meta anual.' :
                                        ' El portafolio mantiene un desempeño satisfactorio. Continuar con el plan actual.'] }) })] }) }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 1.0 }, className: "bg-gray-50 p-6 rounded-xl border border-gray-200 text-center text-sm text-gray-600", children: [_jsxs("p", { children: ["Reporte generado el ", new Date().toLocaleDateString('es-PE'), " a las ", new Date().toLocaleTimeString('es-PE')] }), _jsx("p", { className: "mt-1", children: "Sistema de Gesti\u00F3n de Valorizaciones - Dashboard Gerencial Ejecutivo" }), _jsx("p", { className: "mt-1 text-xs", children: "Informaci\u00F3n clasificada para uso interno de la Alta Direcci\u00F3n" })] })] }));
};
export default ReporteGerencial;
