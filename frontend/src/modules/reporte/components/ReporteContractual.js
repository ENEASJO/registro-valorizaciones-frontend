import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { motion } from 'framer-motion';
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';
import { FileText, Calendar, Clock, Shield, AlertTriangle, CheckCircle, XCircle, TrendingUp, Building, Hammer, Eye, Award, AlertCircle } from 'lucide-react';
const ReporteContractual = ({ datos, filtros }) => {
    // Configuración de colores para gráficos
    const colores = {
        vigente: '#10B981',
        critico: '#EF4444',
        alerta: '#F59E0B',
        normal: '#3B82F6',
        exito: '#10B981',
        neutro: '#6B7280',
        garantia: '#8B5CF6',
        adicional: '#06B6D4'
    };
    // Datos para distribución de contratos por estado
    const datosEstadosContratos = [
        { name: 'Vigentes', value: datos.contratosVigentes.length, color: colores.vigente },
        { name: 'Por Vencer', value: datos.contratosVigentes.filter(c => c.diasRestantes <= 90).length, color: colores.alerta },
        { name: 'Críticos', value: datos.contratosVigentes.filter(c => c.diasRestantes <= 30).length, color: colores.critico }
    ].filter(item => item.value > 0);
    // Datos para timeline de vencimientos
    const vencimientosPorMes = datos.vencimientos.reduce((acc, venc) => {
        const mes = new Date(venc.fechaVencimiento).toLocaleDateString('es-PE', { month: 'short', year: 'numeric' });
        acc[mes] = (acc[mes] || 0) + 1;
        return acc;
    }, {});
    const datosVencimientos = Object.entries(vencimientosPorMes).map(([mes, cantidad]) => ({
        mes,
        cantidad,
        criticos: datos.vencimientos.filter(v => new Date(v.fechaVencimiento).toLocaleDateString('es-PE', { month: 'short', year: 'numeric' }) === mes &&
            v.criticidad === 'CRITICO').length
    })).slice(0, 6);
    // Datos para distribución de garantías
    const garantiasPorTipo = datos.garantias.reduce((acc, garantia) => {
        acc[garantia.tipoGarantia] = (acc[garantia.tipoGarantia] || 0) + garantia.montoGarantia;
        return acc;
    }, {});
    const datosGarantias = Object.entries(garantiasPorTipo).map(([tipo, monto]) => ({
        name: tipo,
        value: monto,
        color: colores.garantia
    }));
    // Función para formatear números como moneda
    const formatearMoneda = (valor) => new Intl.NumberFormat('es-PE', { style: 'currency', currency: 'PEN', minimumFractionDigits: 0 }).format(valor);
    // Función para formatear números con separadores de miles
    const formatearNumero = (valor) => new Intl.NumberFormat('es-PE', { minimumFractionDigits: 0 }).format(valor);
    // Función para obtener el color de criticidad
    const obtenerColorCriticidad = (criticidad) => {
        switch (criticidad) {
            case 'CRITICO': return 'bg-red-100 text-red-800 border-red-200';
            case 'ALTO': return 'bg-orange-100 text-orange-800 border-orange-200';
            case 'MEDIO': return 'bg-amber-100 text-amber-800 border-amber-200';
            case 'BAJO': return 'bg-green-100 text-green-800 border-green-200';
            default: return 'bg-gray-100 text-gray-800 border-gray-200';
        }
    };
    // Función para obtener el ícono de riesgo
    const obtenerIconoRiesgo = (riesgo) => {
        switch (riesgo) {
            case 'CRITICO': return _jsx(XCircle, { className: "w-4 h-4" });
            case 'ALTO': return _jsx(AlertTriangle, { className: "w-4 h-4" });
            case 'MEDIO': return _jsx(AlertCircle, { className: "w-4 h-4" });
            case 'BAJO': return _jsx(CheckCircle, { className: "w-4 h-4" });
            default: return _jsx(Eye, { className: "w-4 h-4" });
        }
    };
    // Custom tooltip para gráficos
    const CustomTooltip = ({ active, payload, label }) => {
        if (active && payload && payload.length) {
            return (_jsxs("div", { className: "bg-white p-3 border border-gray-300 rounded-lg shadow-lg", children: [_jsx("p", { className: "font-medium text-gray-900", children: label }), payload.map((entry, index) => (_jsx("p", { style: { color: entry.color }, children: `${entry.name}: ${entry.value}` }, index)))] }));
        }
        return null;
    };
    return (_jsxs("div", { className: "space-y-8", children: [_jsx(motion.div, { initial: { opacity: 0, y: -20 }, animate: { opacity: 1, y: 0 }, className: "bg-gradient-to-r from-purple-600 to-purple-800 text-white p-6 rounded-xl", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h2", { className: "text-2xl font-bold", children: "Reporte de Control Contractual" }), _jsxs("p", { className: "text-purple-100 mt-1", children: ["Seguimiento integral de contratos, garant\u00EDas y obligaciones - ", filtros.fechaInicio, " al ", filtros.fechaFin] }), _jsxs("p", { className: "text-purple-200 text-sm mt-1", children: [datos.contratosVigentes.length, " contratos vigentes en seguimiento"] })] }), _jsxs("div", { className: "text-right", children: [_jsx("div", { className: "text-3xl font-bold", children: datos.contratosVigentes.length }), _jsx("div", { className: "text-sm text-purple-100", children: "Contratos Activos" })] })] }) }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.1 }, className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [_jsx("div", { className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Contratos Vigentes" }), _jsx("p", { className: "text-2xl font-bold text-purple-600", children: datos.contratosVigentes.length }), _jsxs("p", { className: "text-sm text-gray-500 mt-1", children: [datos.contratosVigentes.filter(c => c.diasRestantes <= 90).length, " pr\u00F3ximos a vencer"] })] }), _jsx("div", { className: "p-3 bg-purple-100 rounded-lg", children: _jsx(FileText, { className: "w-6 h-6 text-purple-600" }) })] }) }), _jsx("div", { className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Valor Total Garant\u00EDas" }), _jsx("p", { className: "text-2xl font-bold text-blue-600", children: formatearMoneda(datos.garantias.reduce((sum, g) => sum + g.montoGarantia, 0)) }), _jsxs("p", { className: "text-sm text-gray-500 mt-1", children: [datos.garantias.length, " garant\u00EDas activas"] })] }), _jsx("div", { className: "p-3 bg-blue-100 rounded-lg", children: _jsx(Shield, { className: "w-6 h-6 text-blue-600" }) })] }) }), _jsx("div", { className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Vencimientos Pr\u00F3ximos" }), _jsx("p", { className: "text-2xl font-bold text-amber-600", children: datos.vencimientos.filter(v => v.diasParaVencer <= 30).length }), _jsx("p", { className: "text-sm text-gray-500 mt-1", children: "en los pr\u00F3ximos 30 d\u00EDas" })] }), _jsx("div", { className: "p-3 bg-amber-100 rounded-lg", children: _jsx(AlertTriangle, { className: "w-6 h-6 text-amber-600" }) })] }) }), _jsx("div", { className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-600", children: "Adicionales/Deductivos" }), _jsx("p", { className: "text-2xl font-bold text-green-600", children: formatearMoneda(datos.adicionalesDeductivos.reduce((sum, ad) => sum + ad.montoAprobado, 0)) }), _jsxs("p", { className: "text-sm text-gray-500 mt-1", children: [datos.adicionalesDeductivos.length, " modificaciones"] })] }), _jsx("div", { className: "p-3 bg-green-100 rounded-lg", children: _jsx(TrendingUp, { className: "w-6 h-6 text-green-600" }) })] }) })] }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.2 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("h3", { className: "text-lg font-semibold text-gray-900 mb-2 flex items-center", children: [_jsx(Building, { className: "w-5 h-5 text-purple-600 mr-2" }), "Estado de Contratos Vigentes"] }), _jsx("p", { className: "text-sm text-gray-600", children: "Situaci\u00F3n detallada de todos los contratos en ejecuci\u00F3n" })] }), _jsx("div", { className: "overflow-x-auto", children: _jsxs("table", { className: "w-full text-sm", children: [_jsx("thead", { children: _jsxs("tr", { className: "border-b border-gray-200", children: [_jsx("th", { className: "text-left py-3 px-4 font-medium text-gray-900", children: "Contrato" }), _jsx("th", { className: "text-left py-3 px-4 font-medium text-gray-900", children: "Obra" }), _jsx("th", { className: "text-left py-3 px-4 font-medium text-gray-900", children: "Contratista" }), _jsx("th", { className: "text-right py-3 px-4 font-medium text-gray-900", children: "Monto" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "Avance" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "D\u00EDas Restantes" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "Riesgo" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "Estado" })] }) }), _jsx("tbody", { children: datos.contratosVigentes.map((contrato, index) => (_jsxs("tr", { className: "border-b border-gray-100 hover:bg-gray-50", children: [_jsxs("td", { className: "py-3 px-4", children: [_jsx("div", { className: "font-medium text-gray-900", children: contrato.numeroContrato }), _jsx("div", { className: "text-xs text-gray-500", children: new Date(contrato.fechaInicio).toLocaleDateString('es-PE') })] }), _jsxs("td", { className: "py-3 px-4", children: [_jsx("div", { className: "font-medium text-gray-900 max-w-xs truncate", children: contrato.nombreObra }), _jsxs("div", { className: "text-xs text-gray-500", children: ["ID: ", contrato.obraId] })] }), _jsx("td", { className: "py-3 px-4", children: _jsx("div", { className: "text-gray-900", children: contrato.contratista }) }), _jsx("td", { className: "py-3 px-4 text-right font-medium text-gray-900", children: formatearMoneda(contrato.montoContrato) }), _jsx("td", { className: "py-3 px-4 text-center", children: _jsxs("div", { className: "flex items-center justify-center", children: [_jsx("div", { className: "w-12 bg-gray-200 rounded-full h-2", children: _jsx("div", { className: "bg-blue-600 h-2 rounded-full", style: { width: `${Math.min(100, contrato.avanceFisico)}%` } }) }), _jsxs("span", { className: "ml-2 text-sm font-medium", children: [contrato.avanceFisico.toFixed(1), "%"] })] }) }), _jsxs("td", { className: "py-3 px-4 text-center", children: [_jsxs("span", { className: `font-medium ${contrato.diasRestantes <= 30 ? 'text-red-600' :
                                                            contrato.diasRestantes <= 90 ? 'text-amber-600' :
                                                                'text-green-600'}`, children: [contrato.diasRestantes, " d\u00EDas"] }), _jsx("div", { className: "text-xs text-gray-500", children: new Date(contrato.fechaFinPrevista).toLocaleDateString('es-PE') })] }), _jsx("td", { className: "py-3 px-4 text-center", children: _jsxs("div", { className: `inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border ${obtenerColorCriticidad(contrato.riesgoIncumplimiento)}`, children: [obtenerIconoRiesgo(contrato.riesgoIncumplimiento), _jsx("span", { className: "ml-1", children: contrato.riesgoIncumplimiento })] }) }), _jsx("td", { className: "py-3 px-4 text-center", children: _jsx("span", { className: "px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800", children: contrato.estadoContrato }) })] }, index))) })] }) })] }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [_jsxs(motion.div, { initial: { opacity: 0, x: -20 }, animate: { opacity: 1, x: 0 }, transition: { delay: 0.3 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("h3", { className: "text-lg font-semibold text-gray-900 mb-2 flex items-center", children: [_jsx(Calendar, { className: "w-5 h-5 text-amber-600 mr-2" }), "Timeline de Vencimientos"] }), _jsx("p", { className: "text-sm text-gray-600", children: "Distribuci\u00F3n temporal de vencimientos pr\u00F3ximos" })] }), _jsx("div", { className: "h-64", children: _jsx(ResponsiveContainer, { width: "100%", height: "100%", children: _jsxs(BarChart, { data: datosVencimientos, children: [_jsx(CartesianGrid, { strokeDasharray: "3 3", stroke: "#f0f0f0" }), _jsx(XAxis, { dataKey: "mes", stroke: "#666", fontSize: 12, angle: -45, textAnchor: "end", height: 60 }), _jsx(YAxis, { stroke: "#666", fontSize: 12 }), _jsx(Tooltip, { content: _jsx(CustomTooltip, {}) }), _jsx(Legend, {}), _jsx(Bar, { dataKey: "cantidad", fill: colores.alerta, name: "Total Vencimientos" }), _jsx(Bar, { dataKey: "criticos", fill: colores.critico, name: "Cr\u00EDticos" })] }) }) })] }), _jsxs(motion.div, { initial: { opacity: 0, x: 20 }, animate: { opacity: 1, x: 0 }, transition: { delay: 0.4 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("h3", { className: "text-lg font-semibold text-gray-900 mb-2 flex items-center", children: [_jsx(Shield, { className: "w-5 h-5 text-blue-600 mr-2" }), "Distribuci\u00F3n de Garant\u00EDas"] }), _jsx("p", { className: "text-sm text-gray-600", children: "Composici\u00F3n del portafolio de garant\u00EDas vigentes" })] }), _jsx("div", { className: "h-64", children: _jsx(ResponsiveContainer, { width: "100%", height: "100%", children: _jsxs(PieChart, { children: [_jsx(Pie, { data: datosGarantias, cx: "50%", cy: "50%", labelLine: false, label: ({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`, outerRadius: 80, fill: "#8884d8", dataKey: "value", children: datosGarantias.map((entry, index) => (_jsx(Cell, { fill: entry.color }, `cell-${index}`))) }), _jsx(Tooltip, { formatter: (value) => formatearMoneda(value) })] }) }) }), _jsxs("div", { className: "mt-4", children: [_jsx("div", { className: "text-center mb-3", children: _jsxs("p", { className: "text-lg font-bold text-gray-900", children: ["Total: ", formatearMoneda(datos.garantias.reduce((sum, g) => sum + g.montoGarantia, 0))] }) }), _jsx("div", { className: "space-y-2 text-sm", children: datosGarantias.map((item, index) => (_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center", children: [_jsx("div", { className: "w-3 h-3 rounded-full mr-2", style: { backgroundColor: item.color } }), _jsx("span", { className: "text-gray-600", children: item.name })] }), _jsx("span", { className: "font-medium text-gray-900", children: formatearMoneda(item.value) })] }, index))) })] })] })] }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.5 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("h3", { className: "text-lg font-semibold text-gray-900 mb-2 flex items-center", children: [_jsx(Clock, { className: "w-5 h-5 text-red-600 mr-2" }), "Seguimiento de Vencimientos Cr\u00EDticos"] }), _jsx("p", { className: "text-sm text-gray-600", children: "Documentos, garant\u00EDas y obligaciones que requieren atenci\u00F3n inmediata" })] }), _jsx("div", { className: "space-y-4", children: datos.vencimientos
                            .sort((a, b) => a.diasParaVencer - b.diasParaVencer)
                            .slice(0, 10)
                            .map((vencimiento, index) => (_jsx("div", { className: `p-4 rounded-lg border-l-4 ${vencimiento.diasParaVencer <= 7 ? 'border-red-500 bg-red-50' :
                                vencimiento.diasParaVencer <= 30 ? 'border-amber-500 bg-amber-50' :
                                    vencimiento.diasParaVencer <= 60 ? 'border-blue-500 bg-blue-50' :
                                        'border-green-500 bg-green-50'}`, children: _jsxs("div", { className: "flex items-start justify-between", children: [_jsxs("div", { className: "flex-1", children: [_jsxs("div", { className: "flex items-center gap-2 mb-1", children: [_jsx("h4", { className: "font-medium text-gray-900", children: vencimiento.descripcion }), _jsx("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${obtenerColorCriticidad(vencimiento.criticidad)}`, children: vencimiento.tipo })] }), _jsx("p", { className: "text-sm text-gray-600 mb-2", children: vencimiento.accionRequerida }), _jsxs("div", { className: "flex items-center gap-4 text-sm", children: [_jsxs("span", { className: "text-gray-500", children: ["Vence: ", new Date(vencimiento.fechaVencimiento).toLocaleDateString('es-PE')] }), _jsx("span", { className: `font-medium ${vencimiento.diasParaVencer <= 7 ? 'text-red-600' :
                                                            vencimiento.diasParaVencer <= 30 ? 'text-amber-600' :
                                                                'text-blue-600'}`, children: vencimiento.diasParaVencer <= 0 ? 'VENCIDO' : `${vencimiento.diasParaVencer} días` })] })] }), _jsx("div", { className: `p-2 rounded-full ${vencimiento.diasParaVencer <= 7 ? 'bg-red-100' :
                                            vencimiento.diasParaVencer <= 30 ? 'bg-amber-100' :
                                                'bg-blue-100'}`, children: vencimiento.diasParaVencer <= 7 ? (_jsx(XCircle, { className: "w-5 h-5 text-red-600" })) : vencimiento.diasParaVencer <= 30 ? (_jsx(AlertTriangle, { className: "w-5 h-5 text-amber-600" })) : (_jsx(Clock, { className: "w-5 h-5 text-blue-600" })) })] }) }, index))) })] }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [_jsxs(motion.div, { initial: { opacity: 0, x: -20 }, animate: { opacity: 1, x: 0 }, transition: { delay: 0.6 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("h3", { className: "text-lg font-semibold text-gray-900 mb-2 flex items-center", children: [_jsx(Hammer, { className: "w-5 h-5 text-red-600 mr-2" }), "Penalidades Aplicadas"] }), _jsx("p", { className: "text-sm text-gray-600", children: "Registro de penalidades por incumplimientos contractuales" })] }), datos.penalidades.length > 0 ? (_jsx("div", { className: "space-y-4", children: datos.penalidades.map((penalidad, index) => (_jsxs("div", { className: "p-4 bg-red-50 rounded-lg border border-red-200", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("h4", { className: "font-medium text-red-900", children: penalidad.tipoIncumplimiento }), _jsx("span", { className: "text-sm font-bold text-red-600", children: formatearMoneda(penalidad.montoAplicado) })] }), _jsxs("p", { className: "text-sm text-red-700 mb-1", children: ["Obra: ", penalidad.obraNombre] }), _jsxs("p", { className: "text-sm text-red-600", children: ["Fecha: ", new Date(penalidad.fechaIncumplimiento).toLocaleDateString('es-PE')] }), penalidad.observaciones && (_jsx("p", { className: "text-xs text-red-600 mt-1", children: penalidad.observaciones }))] }, index))) })) : (_jsxs("div", { className: "text-center py-8", children: [_jsx(CheckCircle, { className: "w-12 h-12 text-green-500 mx-auto mb-3" }), _jsx("h4", { className: "text-lg font-medium text-gray-900", children: "Sin Penalidades" }), _jsx("p", { className: "text-gray-600", children: "No se han aplicado penalidades en el periodo" })] }))] }), _jsxs(motion.div, { initial: { opacity: 0, x: 20 }, animate: { opacity: 1, x: 0 }, transition: { delay: 0.7 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("h3", { className: "text-lg font-semibold text-gray-900 mb-2 flex items-center", children: [_jsx(TrendingUp, { className: "w-5 h-5 text-green-600 mr-2" }), "Adicionales y Deductivos"] }), _jsx("p", { className: "text-sm text-gray-600", children: "Modificaciones contractuales aprobadas y en proceso" })] }), _jsx("div", { className: "space-y-4", children: datos.adicionalesDeductivos.map((modificacion, index) => (_jsxs("div", { className: `p-4 rounded-lg border ${modificacion.tipo === 'ADICIONAL'
                                        ? 'bg-green-50 border-green-200'
                                        : 'bg-blue-50 border-blue-200'}`, children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${modificacion.tipo === 'ADICIONAL'
                                                                ? 'bg-green-100 text-green-800'
                                                                : 'bg-blue-100 text-blue-800'}`, children: modificacion.tipo }), _jsx("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${modificacion.estado === 'APROBADO' ? 'bg-green-100 text-green-800' :
                                                                modificacion.estado === 'PENDIENTE' ? 'bg-amber-100 text-amber-800' :
                                                                    'bg-red-100 text-red-800'}`, children: modificacion.estado })] }), _jsx("span", { className: `text-sm font-bold ${modificacion.tipo === 'ADICIONAL' ? 'text-green-600' : 'text-blue-600'}`, children: formatearMoneda(modificacion.montoAprobado) })] }), _jsx("h4", { className: "font-medium text-gray-900 mb-1", children: modificacion.concepto }), _jsx("p", { className: "text-sm text-gray-600 mb-2", children: modificacion.obraNombre }), _jsxs("div", { className: "flex items-center justify-between text-xs text-gray-500", children: [_jsxs("span", { children: ["Solicitado: ", new Date(modificacion.fechaSolicitud).toLocaleDateString('es-PE')] }), modificacion.fechaAprobacion && (_jsxs("span", { children: ["Aprobado: ", new Date(modificacion.fechaAprobacion).toLocaleDateString('es-PE')] }))] }), modificacion.montoOriginal !== modificacion.montoAprobado && (_jsxs("p", { className: "text-xs text-amber-600 mt-1", children: ["Monto original: ", formatearMoneda(modificacion.montoOriginal)] }))] }, index))) })] })] }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.8 }, className: "bg-white p-6 rounded-xl shadow-lg border border-gray-200", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("h3", { className: "text-lg font-semibold text-gray-900 mb-2 flex items-center", children: [_jsx(Award, { className: "w-5 h-5 text-purple-600 mr-2" }), "Estado Detallado de Garant\u00EDas"] }), _jsx("p", { className: "text-sm text-gray-600", children: "Seguimiento completo de todas las garant\u00EDas vigentes" })] }), _jsx("div", { className: "overflow-x-auto", children: _jsxs("table", { className: "w-full text-sm", children: [_jsx("thead", { children: _jsxs("tr", { className: "border-b border-gray-200", children: [_jsx("th", { className: "text-left py-3 px-4 font-medium text-gray-900", children: "Obra" }), _jsx("th", { className: "text-left py-3 px-4 font-medium text-gray-900", children: "Tipo Garant\u00EDa" }), _jsx("th", { className: "text-left py-3 px-4 font-medium text-gray-900", children: "Entidad Emisora" }), _jsx("th", { className: "text-right py-3 px-4 font-medium text-gray-900", children: "Monto" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "Fecha Emisi\u00F3n" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "Vencimiento" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "D\u00EDas Para Vencer" }), _jsx("th", { className: "text-center py-3 px-4 font-medium text-gray-900", children: "Estado" })] }) }), _jsx("tbody", { children: datos.garantias.map((garantia, index) => (_jsxs("tr", { className: "border-b border-gray-100 hover:bg-gray-50", children: [_jsxs("td", { className: "py-3 px-4", children: [_jsx("div", { className: "font-medium text-gray-900 max-w-xs truncate", children: garantia.obraNombre }), _jsxs("div", { className: "text-xs text-gray-500", children: ["ID: ", garantia.obraId] })] }), _jsx("td", { className: "py-3 px-4", children: _jsx("span", { className: "px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800", children: garantia.tipoGarantia }) }), _jsx("td", { className: "py-3 px-4 text-gray-600", children: garantia.entidadEmisora }), _jsx("td", { className: "py-3 px-4 text-right font-medium text-gray-900", children: formatearMoneda(garantia.montoGarantia) }), _jsx("td", { className: "py-3 px-4 text-center text-gray-600", children: new Date(garantia.fechaEmision).toLocaleDateString('es-PE') }), _jsx("td", { className: "py-3 px-4 text-center text-gray-600", children: new Date(garantia.fechaVencimiento).toLocaleDateString('es-PE') }), _jsx("td", { className: "py-3 px-4 text-center", children: _jsxs("span", { className: `font-medium ${garantia.diasParaVencer <= 30 ? 'text-red-600' :
                                                        garantia.diasParaVencer <= 90 ? 'text-amber-600' :
                                                            'text-green-600'}`, children: [garantia.diasParaVencer, " d\u00EDas"] }) }), _jsx("td", { className: "py-3 px-4 text-center", children: _jsx("span", { className: `px-2 py-1 text-xs font-medium rounded-full ${garantia.estado === 'VIGENTE' ? 'bg-green-100 text-green-800' :
                                                        garantia.estado === 'POR_VENCER' ? 'bg-amber-100 text-amber-800' :
                                                            'bg-red-100 text-red-800'}`, children: garantia.estado }) })] }, index))) })] }) })] }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.9 }, className: "bg-gray-50 p-6 rounded-xl border border-gray-200 text-center text-sm text-gray-600", children: [_jsxs("p", { children: ["Reporte generado el ", new Date().toLocaleDateString('es-PE'), " a las ", new Date().toLocaleTimeString('es-PE')] }), _jsx("p", { className: "mt-1", children: "Sistema de Gesti\u00F3n de Valorizaciones - Control Contractual y Legal" })] })] }));
};
export default ReporteContractual;
