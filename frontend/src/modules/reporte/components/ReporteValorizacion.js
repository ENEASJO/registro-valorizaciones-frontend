import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useMemo } from 'react';
import { motion } from 'framer-motion';
import { Building, MapPin, Calendar, DollarSign, User, Phone, Mail, AlertTriangle, CheckCircle } from 'lucide-react';
const ReporteValorizacion = ({ datos, filtros }) => {
    // Cálculos adicionales
    const estadisticas = useMemo(() => ({
        totalPartidas: datos.partidas.length,
        partidasConAvance: datos.partidas.filter(p => p.metradoActual > 0).length,
        montoTotalPartidas: datos.partidas.reduce((sum, p) => sum + p.montoContractual, 0),
        montoEjecutadoPartidas: datos.partidas.reduce((sum, p) => sum + p.montoActual, 0),
        porcentajeDeduccionesTotales: (datos.valorizacion.deducciones.total / datos.valorizacion.montoBruto) * 100,
        eficienciaEjecucion: (datos.valorizacion.avanceFisicoAcumulado / datos.valorizacion.avanceEconomicoAcumulado) * 100
    }), [datos]);
    const formatearMoneda = (valor) => `S/ ${valor.toLocaleString('es-PE', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
    const formatearPorcentaje = (valor) => `${valor.toFixed(2)}%`;
    return (_jsxs("div", { className: "space-y-6 p-6", children: [_jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, className: "text-center border-b border-gray-200 pb-6", children: [_jsx("h1", { className: "text-2xl font-bold text-gray-900 mb-2", children: "REPORTE DE VALORIZACI\u00D3N MENSUAL" }), _jsxs("p", { className: "text-lg text-gray-700 mb-1", children: ["Valorizaci\u00F3n N\u00B0 ", datos.valorizacion.numero, " - ", datos.valorizacion.periodo] }), _jsxs("p", { className: "text-sm text-gray-600", children: ["Per\u00EDodo: ", datos.valorizacion.periodoInicio, " al ", datos.valorizacion.periodoFin] })] }), _jsxs(motion.section, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.1 }, className: "bg-white rounded-lg border border-gray-200", children: [_jsx("div", { className: "px-6 py-4 border-b border-gray-200 bg-gray-50", children: _jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Building, { className: "w-5 h-5 text-blue-600" }), _jsx("h3", { className: "text-lg font-semibold text-gray-900", children: "Informaci\u00F3n General de la Obra" })] }) }), _jsx("div", { className: "p-6", children: _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [_jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "grid grid-cols-3 gap-4", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Nombre:" }), _jsx("span", { className: "col-span-2 text-sm text-gray-900", children: datos.obra.nombre })] }), _jsxs("div", { className: "grid grid-cols-3 gap-4", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "N\u00B0 Contrato:" }), _jsx("span", { className: "col-span-2 text-sm text-gray-900", children: datos.obra.numeroContrato })] }), _jsxs("div", { className: "grid grid-cols-3 gap-4", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Ubicaci\u00F3n:" }), _jsxs("span", { className: "col-span-2 text-sm text-gray-900 flex items-center gap-1", children: [_jsx(MapPin, { className: "w-4 h-4 text-gray-500" }), datos.obra.ubicacion] })] }), _jsxs("div", { className: "grid grid-cols-3 gap-4", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Tipo de Obra:" }), _jsx("span", { className: "col-span-2 text-sm text-gray-900", children: datos.obra.tipoObra })] }), _jsxs("div", { className: "grid grid-cols-3 gap-4", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Modalidad:" }), _jsx("span", { className: "col-span-2 text-sm text-gray-900", children: datos.obra.modalidadEjecucion })] })] }), _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "grid grid-cols-3 gap-4", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Monto Ejecuci\u00F3n:" }), _jsx("span", { className: "col-span-2 text-sm font-medium text-green-700", children: formatearMoneda(datos.obra.montoEjecucion) })] }), _jsxs("div", { className: "grid grid-cols-3 gap-4", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Monto Supervisi\u00F3n:" }), _jsx("span", { className: "col-span-2 text-sm font-medium text-blue-700", children: formatearMoneda(datos.obra.montoSupervision) })] }), _jsxs("div", { className: "grid grid-cols-3 gap-4", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Monto Total:" }), _jsx("span", { className: "col-span-2 text-sm font-bold text-gray-900", children: formatearMoneda(datos.obra.montoTotal) })] }), _jsxs("div", { className: "grid grid-cols-3 gap-4", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Plazo:" }), _jsxs("span", { className: "col-span-2 text-sm text-gray-900 flex items-center gap-1", children: [_jsx(Calendar, { className: "w-4 h-4 text-gray-500" }), datos.obra.plazoEjecucionDias, " d\u00EDas"] })] }), _jsxs("div", { className: "grid grid-cols-3 gap-4", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Fecha Inicio:" }), _jsx("span", { className: "col-span-2 text-sm text-gray-900", children: datos.obra.fechaInicio })] })] })] }) })] }), _jsxs(motion.section, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.2 }, className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [_jsxs("div", { className: "bg-white rounded-lg border border-gray-200", children: [_jsx("div", { className: "px-6 py-4 border-b border-gray-200 bg-green-50", children: _jsxs("div", { className: "flex items-center gap-2", children: [_jsx(User, { className: "w-5 h-5 text-green-600" }), _jsx("h3", { className: "text-lg font-semibold text-gray-900", children: "Contratista Ejecutor" })] }) }), _jsxs("div", { className: "p-6 space-y-3", children: [_jsxs("div", { children: [_jsx("span", { className: "text-xs font-medium text-gray-600 uppercase tracking-wide", children: "Raz\u00F3n Social" }), _jsx("p", { className: "text-sm font-medium text-gray-900", children: datos.contratista.nombre })] }), _jsxs("div", { children: [_jsx("span", { className: "text-xs font-medium text-gray-600 uppercase tracking-wide", children: "RUC" }), _jsx("p", { className: "text-sm text-gray-900", children: datos.contratista.ruc })] }), _jsxs("div", { children: [_jsx("span", { className: "text-xs font-medium text-gray-600 uppercase tracking-wide", children: "Representante Legal" }), _jsx("p", { className: "text-sm text-gray-900", children: datos.contratista.representanteLegal })] }), _jsxs("div", { children: [_jsx("span", { className: "text-xs font-medium text-gray-600 uppercase tracking-wide", children: "Direcci\u00F3n" }), _jsx("p", { className: "text-sm text-gray-900", children: datos.contratista.direccion })] }), (datos.contratista.telefono || datos.contratista.email) && (_jsxs("div", { className: "flex items-center gap-4 pt-2 text-sm text-gray-600", children: [datos.contratista.telefono && (_jsxs("div", { className: "flex items-center gap-1", children: [_jsx(Phone, { className: "w-4 h-4" }), datos.contratista.telefono] })), datos.contratista.email && (_jsxs("div", { className: "flex items-center gap-1", children: [_jsx(Mail, { className: "w-4 h-4" }), datos.contratista.email] }))] }))] })] }), _jsxs("div", { className: "bg-white rounded-lg border border-gray-200", children: [_jsx("div", { className: "px-6 py-4 border-b border-gray-200 bg-blue-50", children: _jsxs("div", { className: "flex items-center gap-2", children: [_jsx(User, { className: "w-5 h-5 text-blue-600" }), _jsx("h3", { className: "text-lg font-semibold text-gray-900", children: "Supervisor de Obra" })] }) }), _jsxs("div", { className: "p-6 space-y-3", children: [_jsxs("div", { children: [_jsx("span", { className: "text-xs font-medium text-gray-600 uppercase tracking-wide", children: "Raz\u00F3n Social" }), _jsx("p", { className: "text-sm font-medium text-gray-900", children: datos.supervisor.nombre })] }), _jsxs("div", { children: [_jsx("span", { className: "text-xs font-medium text-gray-600 uppercase tracking-wide", children: "RUC" }), _jsx("p", { className: "text-sm text-gray-900", children: datos.supervisor.ruc })] }), _jsxs("div", { children: [_jsx("span", { className: "text-xs font-medium text-gray-600 uppercase tracking-wide", children: "Supervisor Responsable" }), _jsx("p", { className: "text-sm text-gray-900", children: datos.supervisor.supervisorResponsable })] }), _jsxs("div", { children: [_jsx("span", { className: "text-xs font-medium text-gray-600 uppercase tracking-wide", children: "Direcci\u00F3n" }), _jsx("p", { className: "text-sm text-gray-900", children: datos.supervisor.direccion })] }), (datos.supervisor.telefono || datos.supervisor.email) && (_jsxs("div", { className: "flex items-center gap-4 pt-2 text-sm text-gray-600", children: [datos.supervisor.telefono && (_jsxs("div", { className: "flex items-center gap-1", children: [_jsx(Phone, { className: "w-4 h-4" }), datos.supervisor.telefono] })), datos.supervisor.email && (_jsxs("div", { className: "flex items-center gap-1", children: [_jsx(Mail, { className: "w-4 h-4" }), datos.supervisor.email] }))] }))] })] })] }), _jsxs(motion.section, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.3 }, className: "bg-white rounded-lg border border-gray-200", children: [_jsx("div", { className: "px-6 py-4 border-b border-gray-200 bg-gray-50", children: _jsxs("div", { className: "flex items-center gap-2", children: [_jsx(DollarSign, { className: "w-5 h-5 text-green-600" }), _jsxs("h3", { className: "text-lg font-semibold text-gray-900", children: ["Resumen de Valorizaci\u00F3n N\u00B0 ", datos.valorizacion.numero] })] }) }), _jsx("div", { className: "p-6", children: _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [_jsxs("div", { className: "lg:col-span-2 space-y-6", children: [_jsxs("div", { children: [_jsx("h4", { className: "text-md font-semibold text-gray-900 mb-4", children: "Montos y C\u00E1lculos" }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex justify-between items-center py-2 border-b border-gray-100", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Monto Bruto:" }), _jsx("span", { className: "text-sm font-bold text-green-700", children: formatearMoneda(datos.valorizacion.montoBruto) })] }), _jsxs("div", { className: "ml-4 space-y-2 bg-red-50 p-3 rounded", children: [_jsx("div", { className: "text-xs font-semibold text-red-800 mb-2", children: "DEDUCCIONES" }), [
                                                                    { label: 'Adelanto Directo', valor: datos.valorizacion.deducciones.adelantoDirecto },
                                                                    { label: 'Adelanto Materiales', valor: datos.valorizacion.deducciones.adelantoMateriales },
                                                                    { label: 'Retención Garantía', valor: datos.valorizacion.deducciones.retencionGarantia },
                                                                    { label: 'Penalidades', valor: datos.valorizacion.deducciones.penalidades },
                                                                    { label: 'Otras Deducciones', valor: datos.valorizacion.deducciones.otras }
                                                                ].map((deduccion, index) => (_jsxs("div", { className: "flex justify-between items-center", children: [_jsxs("span", { className: "text-xs text-gray-700", children: [deduccion.label, ":"] }), _jsxs("span", { className: "text-xs font-medium text-red-700", children: ["-", formatearMoneda(deduccion.valor)] })] }, index))), _jsxs("div", { className: "flex justify-between items-center pt-2 border-t border-red-200", children: [_jsx("span", { className: "text-xs font-semibold text-red-800", children: "Total Deducciones:" }), _jsxs("span", { className: "text-xs font-bold text-red-800", children: ["-", formatearMoneda(datos.valorizacion.deducciones.total)] })] })] }), _jsxs("div", { className: "flex justify-between items-center py-2 border-b border-gray-100", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Monto Neto:" }), _jsx("span", { className: "text-sm font-bold text-blue-700", children: formatearMoneda(datos.valorizacion.montoNeto) })] }), _jsxs("div", { className: "flex justify-between items-center py-2 border-b border-gray-100", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "IGV (18%):" }), _jsx("span", { className: "text-sm font-medium text-gray-700", children: formatearMoneda(datos.valorizacion.igv) })] }), _jsxs("div", { className: "flex justify-between items-center py-3 border-t-2 border-gray-300 bg-green-50 px-3 rounded", children: [_jsx("span", { className: "text-md font-bold text-gray-900", children: "Monto Total con IGV:" }), _jsx("span", { className: "text-lg font-bold text-green-700", children: formatearMoneda(datos.valorizacion.montoTotal) })] })] })] }), _jsxs("div", { children: [_jsx("h4", { className: "text-md font-semibold text-gray-900 mb-4", children: "Estado y Fechas" }), _jsxs("div", { className: "grid grid-cols-2 gap-4", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx("div", { className: `p-2 rounded-full ${datos.valorizacion.estado === 'APROBADA' ? 'bg-green-100' :
                                                                        datos.valorizacion.estado === 'PAGADA' ? 'bg-blue-100' :
                                                                            'bg-yellow-100'}`, children: datos.valorizacion.estado === 'APROBADA' || datos.valorizacion.estado === 'PAGADA' ? (_jsx(CheckCircle, { className: `w-4 h-4 ${datos.valorizacion.estado === 'PAGADA' ? 'text-blue-600' : 'text-green-600'}` })) : (_jsx(AlertTriangle, { className: "w-4 h-4 text-yellow-600" })) }), _jsxs("div", { children: [_jsx("p", { className: "text-xs font-medium text-gray-600", children: "Estado" }), _jsx("p", { className: "text-sm font-semibold text-gray-900", children: datos.valorizacion.estado })] })] }), datos.valorizacion.fechaPresentacion && (_jsxs("div", { children: [_jsx("p", { className: "text-xs font-medium text-gray-600", children: "F. Presentaci\u00F3n" }), _jsx("p", { className: "text-sm text-gray-900", children: datos.valorizacion.fechaPresentacion })] })), datos.valorizacion.fechaAprobacion && (_jsxs("div", { children: [_jsx("p", { className: "text-xs font-medium text-gray-600", children: "F. Aprobaci\u00F3n" }), _jsx("p", { className: "text-sm text-gray-900", children: datos.valorizacion.fechaAprobacion })] })), datos.valorizacion.fechaPago && (_jsxs("div", { children: [_jsx("p", { className: "text-xs font-medium text-gray-600", children: "F. Pago" }), _jsx("p", { className: "text-sm text-gray-900", children: datos.valorizacion.fechaPago })] }))] })] })] }), _jsxs("div", { className: "space-y-4", children: [_jsx("h4", { className: "text-md font-semibold text-gray-900", children: "Avance de Obra" }), _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { children: [_jsxs("div", { className: "flex justify-between items-center mb-2", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Avance F\u00EDsico Mensual" }), _jsx("span", { className: "text-sm font-bold text-blue-700", children: formatearPorcentaje(datos.valorizacion.avanceFisicoMensual) })] }), _jsx("div", { className: "w-full bg-gray-200 rounded-full h-2", children: _jsx("div", { className: "bg-blue-600 h-2 rounded-full", style: { width: `${datos.valorizacion.avanceFisicoMensual}%` } }) })] }), _jsxs("div", { children: [_jsxs("div", { className: "flex justify-between items-center mb-2", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Avance Econ\u00F3mico Mensual" }), _jsx("span", { className: "text-sm font-bold text-green-700", children: formatearPorcentaje(datos.valorizacion.avanceEconomicoMensual) })] }), _jsx("div", { className: "w-full bg-gray-200 rounded-full h-2", children: _jsx("div", { className: "bg-green-600 h-2 rounded-full", style: { width: `${datos.valorizacion.avanceEconomicoMensual}%` } }) })] }), _jsxs("div", { className: "border-t pt-4", children: [_jsxs("div", { className: "flex justify-between items-center mb-2", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Avance F\u00EDsico Acumulado" }), _jsx("span", { className: "text-sm font-bold text-blue-700", children: formatearPorcentaje(datos.valorizacion.avanceFisicoAcumulado) })] }), _jsx("div", { className: "w-full bg-gray-200 rounded-full h-3", children: _jsx("div", { className: "bg-blue-600 h-3 rounded-full", style: { width: `${datos.valorizacion.avanceFisicoAcumulado}%` } }) })] }), _jsxs("div", { children: [_jsxs("div", { className: "flex justify-between items-center mb-2", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Avance Econ\u00F3mico Acumulado" }), _jsx("span", { className: "text-sm font-bold text-green-700", children: formatearPorcentaje(datos.valorizacion.avanceEconomicoAcumulado) })] }), _jsx("div", { className: "w-full bg-gray-200 rounded-full h-3", children: _jsx("div", { className: "bg-green-600 h-3 rounded-full", style: { width: `${datos.valorizacion.avanceEconomicoAcumulado}%` } }) })] })] }), _jsxs("div", { className: "bg-gray-50 p-4 rounded-lg", children: [_jsx("h5", { className: "text-sm font-semibold text-gray-900 mb-3", children: "Estad\u00EDsticas" }), _jsxs("div", { className: "space-y-2 text-xs", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-600", children: "Total Partidas:" }), _jsx("span", { className: "font-medium", children: estadisticas.totalPartidas })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-600", children: "Con Avance:" }), _jsx("span", { className: "font-medium text-green-600", children: estadisticas.partidasConAvance })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-600", children: "% Deducciones:" }), _jsx("span", { className: "font-medium text-red-600", children: formatearPorcentaje(estadisticas.porcentajeDeduccionesTotales) })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-600", children: "Eficiencia:" }), _jsx("span", { className: `font-medium ${estadisticas.eficienciaEjecucion >= 95 ? 'text-green-600' :
                                                                        estadisticas.eficienciaEjecucion >= 85 ? 'text-yellow-600' : 'text-red-600'}`, children: formatearPorcentaje(estadisticas.eficienciaEjecucion) })] })] })] })] })] }) })] }), _jsxs(motion.section, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.5 }, className: "bg-white rounded-lg border border-gray-200", children: [_jsx("div", { className: "px-6 py-4 border-b border-gray-200 bg-gray-50", children: _jsx("h3", { className: "text-lg font-semibold text-gray-900", children: "Firmas y Aprobaciones" }) }), _jsxs("div", { className: "p-6", children: [_jsx("div", { className: "text-center mb-6", children: _jsxs("p", { className: "text-sm text-gray-600", children: ["Valorizaci\u00F3n elaborada y presentada en la fecha: ", _jsx("strong", { children: datos.firmas.fechaFirmas })] }) }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-8", children: [_jsx("div", { className: "text-center", children: _jsxs("div", { className: "border-t-2 border-gray-400 pt-2 mb-2", children: [_jsx("p", { className: "font-semibold text-gray-900", children: datos.firmas.residenteObra }), _jsx("p", { className: "text-sm text-gray-600", children: "RESIDENTE DE OBRA" }), _jsx("p", { className: "text-xs text-gray-500", children: "Contratista Ejecutor" })] }) }), _jsx("div", { className: "text-center", children: _jsxs("div", { className: "border-t-2 border-gray-400 pt-2 mb-2", children: [_jsx("p", { className: "font-semibold text-gray-900", children: datos.firmas.supervisorObra }), _jsx("p", { className: "text-sm text-gray-600", children: "SUPERVISOR DE OBRA" }), _jsx("p", { className: "text-xs text-gray-500", children: "Supervisor de Obra" })] }) }), _jsx("div", { className: "text-center", children: _jsxs("div", { className: "border-t-2 border-gray-400 pt-2 mb-2", children: [_jsx("p", { className: "font-semibold text-gray-900", children: datos.firmas.responsableEntidad }), _jsx("p", { className: "text-sm text-gray-600", children: "RESPONSABLE DE LA ENTIDAD" }), _jsx("p", { className: "text-xs text-gray-500", children: "Entidad Contratante" })] }) })] })] })] })] }));
};
export default ReporteValorizacion;
